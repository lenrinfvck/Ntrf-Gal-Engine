(function(f){typeof define==="function"?define(f):f()})(function(require,exports,module){function GalView(t,i){this.dom=t,this.opt=$.extend({},defaultOpt,i),this.stage=$.extend({},defaultStage),this.state=0,this.script="",this.bgmObj={},this.comList={},this.comIndex=0,this.init()}var $=require("jquery"),Strcom=require("strcom"),Sound=require("ntrf_sound"),defaultOpt={width:960,height:540},defaultStage={bgm:"",bg:"",lh:[],dia:{name:"",fonts:""},comIndex:0,com:{}};GalView.prototype={init:function(){var t=this.dom,i=this,e=i.opt;this.bgmObj=new Sound,t.addClass("gal").css({width:e.width,height:e.height}),this.bindUI()},setScript:function(t){this.comList=t,this.comIndex=0},bindUI:function(){var t=this.dom,i=this;t.bind("click",function(t){t.preventDefault(),t.stopPropagation(),i.nextCom()})},changeBgm:function(t){this.bgmObj.changeUrl(t)},nextCom:function(){var t=this,i=t.comList,e=t.comIndex;t.comIndex<t.comList.length-1&&t.comIndex++,i[e].run(t)},changeBg:function(t){this.stage.bg=t,this.dom.find(".bg").css("background-image","url("+t+")")},setLh:function(t){t?this.dom.find(".lh-stage img").attr("src",t).parent().removeClass("hide"):this.dom.find(".lh-stage img").attr("src","")},setDia:function(t,i){var e=$(".dia-title"),n=$(".dia-fonts");t?e.text(t):e.text(""),n.text(i)},playVoice:function(t){if(t){var i=new Sound(t);i.playOnce()}}},module.exports=GalView;});