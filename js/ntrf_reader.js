(function(f){typeof define==="function"?define(f):f()})(function(require,exports,module){function ScriptsReader(){this.log=""}var Strcom=require("strcom"),Comrun=require("ntrf_comrun");ScriptsReader.CharRead=function(t){void 0===t?str="":str=t,this.string=Strcom.delNote(str),this.length=str.length,this.curPos=0},ScriptsReader.CharRead.prototype={nextChar:function(){var t=this.curPos;return t>=this.length?-1:"\r"===this.string[this.curPos+1]&&"\n"===this.string[this.curPos+2]?(this.curPos+=2,this.string[this.curPos-2]):this.string[this.curPos++]},curChar:function(){return this.string[this.curPos]},retract:function(t){void 0===t&&(t=1),this.curPos-=t,this.curPos<0&&(this.curPos=0)}},ScriptsReader.Commond=function(t){this.comHead="",this.comArr={}},ScriptsReader.ComList=function(t){this.charRead=new ScriptsReader.CharRead(t),this.curLine=0,this.comListStr=[],this.comList=[],this.strParse(t)},ScriptsReader.ComList.prototype={strParse:function(){for(var t=this.charRead,r="",s=this.comList;t.curChar();){var i=t.nextChar();if(-1===i)break;if(r+=i,/[\r\n]|/.test(i)&&/[@#]/.test(t.string[t.curPos])){if("\n"===r||"\r"===r){r="";continue}this.curLine++,this.comListStr.push(r),r=""}}this.curLine++,this.comListStr.push(r),r="",this.comListStr.forEach(function(t){s.push(Comrun.comParse(t))})}},module.exports=ScriptsReader;});